<link rel="stylesheet" type="text/css" href="/stylesheets/bootstrap.min.css">
<link rel="stylesheet" type="text/css" href="/stylesheets/documentation.css"> 

  <div class="container">

    <div class="row">
      <h2 id='objects top_h2'>Objects</h2>
      
      <%- api.objects.each do |o| %>
      <div id="<%= o.name %>" class = "object <%= o.name %>">
        <h3 class = "object-heading" id="object-<%= o.name2 %>"><%= o.name2 %></h3>

        <div class = "parameters">
          <h4>Fields</h4>

          <table class = "table">
            <thead>
              <tr>
                <th>Name</th>
                <th>Type</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
            <%- o.parameters.each do |parameter| %>
              <tr>
                <td><%= parameter.name %></td>

                <td class = "type">
                  <%- if parameter.type %>
                    <code><%= parameter.type %></code>
                  <%- end %>
                </td>

                <td class = "description">
                  <%- if parameter.description %>
                    <%= parameter.description %>
                  <%- end %>
                  <%- if parameter.example %>
                    <h5>Example</h5>
                    <%= parameter.example %>
                  <%- end %>
                
                </td>
              </tr>

            <%- end %>
            </tbody>
            </table>
        </div>

        <%- if o.example %>
        <div class = "example clear">
          <h4>Example</h4>

          <pre class="prettyprint"><%= o.example %></pre>
        </div>
        <%- end %>

      </div>
      <%- end %>
    </div>

    
    <div class="row">
      <h2>Resources</h2>
      
      <%- api.resources.each do |resource| %>
      <div class = "resource <%= resource.name %>">
        <h3 class = "resource-heading" id='resource-<%= resource.name %>'><%= resource.name %></h3>

        <div class = "resource-body" >
          <div class = "description"><%= resource.description %></div>

          <div class = "requests">
            <h4>Requests</h4>
            
            <%- resource.requests.each do |req| %>
            <div class = "request panel panel-default">
              <div class = "panel-heading" id="call-<%= resource.name %>-<%= req.name %>" >
                <h4><%= req.call_type %></h4>
                <%= req.name %>
              </div>

              <div class = "panel-body">
                <%- if req.path %>
                  <h5>Path</h5>
                  <div class = "path well"><%= req.path %></div>
                <%- end %>

                <%- if req.description %>
                <div class = "description">
                  <h5>Description</h5>
                  <%= req.description %>
                </div>
                <%- end %>

                <div class = "parameters">
                  <h5>Parameters</h5>

                  <table class = "table">
                    <thead>
                      <tr>
                        <th>Name</th>
                        <th>Type</th>
                        <th>Description</th>
                      </tr>
                    </thead>
                    <tbody>
                    <%- req.parameters.each do |parameter| %>
                      <tr>
                        <td>
                        <%- if parameter.class == DocSmoosher::ApiObject %>
                          <a href='#<%= parameter.name %>'><%= parameter.name %></a>
                        <%- else %>
                          <%= parameter.name %>
                        <%- end %>
                        <%- if parameter.required %>
                          <span class='text-muted'>required</span>
                        <%- end %>
                        </td>

                        <td class = "type">
                          <%- if parameter.type %>
                            <code><%= parameter.type %></code>
                          <%- end %>
                        </td>

                        <td class = "description">
                          <%- if parameter.description %>
                            <%= parameter.description %>
                          <%- end %>
                          <%- if parameter.default %>
                            <h5>Default</h5>
                            <code><%= parameter.default %></code>
                          <%- end %>
                          <%- if parameter.example && parameter.class != DocSmoosher::ApiObject %>
                            <h5>Example</h5>
                            <%= parameter.example %>
                          <%- end %>
                        </td>
                      </tr>

                    <%- end %>
                    </tbody>
                    </table>
                </div>

                <%- if req.response %>
                <div class = "response">
                  <h4>
                    Response
                  </h4>

                  <div class = 'well'>
                  <%= req.response.to_json %>
                  </div>
                </div>
                <%- end %>
              </div>
            </div>

            <%- end %>
          </div>
        </div>
      </div>


      <%- end %>
			

    </div>    
  </div>
  
  <div class='navigation'>
    
    <ul>
      <li>
        <a href='#objects'>objects</a>
        
        <ul>
        <%- api.objects.each do |o| %>
          <li><a href="#object-<%= o.name2 %>"><%= o.name2 %></a></li>
        <%- end %>
        </ul>
        
      </li>
      
      <%- api.resources.each do |resource| %>
      <li>
        <a href='#resource-<%= resource.name %>'><%= resource.name %></a>
        
        <ul>
          <%- resource.requests.each do |req| %>
          <li><a href='#call-<%= resource.name %>-<%= req.name %>'><%= req.name %></a></li>
          <%- end %>
        </ul>
      </li>
      <%- end %>
      
    </ul>
  
  </div>

